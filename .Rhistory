install.packages("gitignore")
library(tinytex)
install.packages("gitignore")
library(gitignore)
pdf(file = "Histogram_data_ex.pdf")
pdf(file = "Histogram_data_ex.pdf")
pdf(file = "Histogram_data_ex.pdf")
pdf(file = "Histogram_data_ex.pdf")
pdf(file = "Histogram_data_ex.pdf")
pdf(file = "angoaual_Mata.pdf")
knitr::kable(
head(iris, 20), caption = 'Here is a nice table!',
booktabs = TRUE
)
# The file "jpl_master_edited.csv" was too large to commit to Github.
# The data frame "master" contains all data from the original csv:
#master <- read.csv("jpl_master_edited.csv")[,1:9]
#master$depth.to.GW..ft. <- as.numeric(master$depth.to.GW..ft.)
#master$date <- as.Date(master$date, format = "%m/%d/%y")
library(leaflet)
library(dplyr)
library(ggplot2)
library(jpeg)
library(sf)
library(dplyr)
library(ggplot2)
library(jpeg)
library(geojsonio)
library(sf)
library(tidyverse)
library(data.table)
library(lubridate)
library(graphics)
load("master.Rda")
load("code/master.Rda")
# Create a histogram of the entire dataset
hist(master$date, 'years', xlab = "Date", freq = TRUE, format = "%Y")
# Create a master list of all wells
master_wells <- distinct(master, mergeOn, .keep_all = TRUE)[,1:7]
# we must keep some columns as chr b/c some have letters
master_wells$NDI <- as.character(master_wells$NDI)
# Load in a geojson file that outlines the central valley
CV_shape <- geojsonio::geojson_read("CA_Bulletin_118_Aquifer_Regions_dissolved.geojson", what = "sp")
# Load in a geojson file that outlines the central valley
CV_shape <- geojsonio::geojson_read("code/CA_Bulletin_118_Aquifer_Regions_dissolved.geojson", what = "sp")
# Create a leaflet map of the all wells in the dataset with the central valley outline
leaflet() %>%
addTiles() %>%
addPolygons(data = CV_shape, stroke = FALSE, smoothFactor = 0.3, fillOpacity = 0.5) %>%
addMarkers(data = master_wells,
lng = ~lon,
lat = ~lat,
popup = ~NDI,
clusterOptions = markerClusterOptions())
pdf(file = "angoaual_Mata.pdf")
pdf(file = "angoaual_Mata.pdf")
# Create a leaflet map of the all wells in the dataset with the central valley outline
leaflet() %>%
addTiles() %>%
addPolygons(data = CV_shape, stroke = FALSE, smoothFactor = 0.3, fillOpacity = 0.5) %>%
addMarkers(data = master_wells,
lng = ~lon,
lat = ~lat,
popup = ~NDI,
clusterOptions = markerClusterOptions())
pdf(file = "angoaual_Mata.pdf")
# Create a leaflet map of the all wells in the dataset with the central valley outline
leaflet() %>%
addTiles() %>%
addPolygons(data = CV_shape, stroke = FALSE, smoothFactor = 0.3, fillOpacity = 0.5) %>%
addMarkers(data = master_wells,
lng = ~lon,
lat = ~lat,
popup = ~NDI,
clusterOptions = markerClusterOptions())
library(leaflet)
library(dplyr)
library(ggplot2)
library(jpeg)
library(geojsonio)
library(sf)
library(tidyverse)
library(data.table)
library(lubridate)
library(graphics)
load("code/master.Rda")
head(master)
# Create a histogram of the entire dataset
hist(master$date, 'years', xlab = "Date", freq = TRUE, format = "%Y")
# Create a master list of all wells
master_wells <- distinct(master, mergeOn, .keep_all = TRUE)[,1:7]
# we must keep some columns as chr b/c some have letters
master_wells$NDI <- as.character(master_wells$NDI)
# Load in a geojson file that outlines the central valley
CV_shape <- geojsonio::geojson_read("code/CA_Bulletin_118_Aquifer_Regions_dissolved.geojson", what = "sp")
# Create a leaflet map of the all wells in the dataset with the central valley outline
leaflet() %>%
addTiles() %>%
addPolygons(data = CV_shape, stroke = FALSE, smoothFactor = 0.3, fillOpacity = 0.5) %>%
addMarkers(data = master_wells,
lng = ~lon,
lat = ~lat,
popup = ~NDI,
clusterOptions = markerClusterOptions())
library(dplyr)
library(leaflet)
# Create a master list of all wells
master_wells <- distinct(master, mergeOn, .keep_all = TRUE)[,1:7]
# we must keep some columns as chr b/c some have letters
master_wells$NDI <- as.character(master_wells$NDI)
# Load in a geojson file that outlines the central valley
CV_shape <- geojsonio::geojson_read("code/CA_Bulletin_118_Aquifer_Regions_dissolved.geojson", what = "sp")
# Create a leaflet map of the all wells in the dataset with the central valley outline
leaflet() %>%
addTiles() %>%
addPolygons(data = CV_shape, stroke = FALSE, smoothFactor = 0.3, fillOpacity = 0.5) %>%
addMarkers(data = master_wells,
lng = ~lon,
lat = ~lat,
popup = ~NDI,
clusterOptions = markerClusterOptions())
load("code/master.Rda")
head(master)
# Create a histogram of the entire dataset
hist(master$date, 'years', xlab = "Date", freq = TRUE, format = "%Y")
# Final leaflet map with study area in red
leaflet() %>%
addTiles() %>%
addPolygons(data = CV_shape, stroke = FALSE, smoothFactor = 0.3, fillOpacity = 0.5) %>%
addMarkers(data = w76,
lng = ~long,
lat = ~lat,
popup = ~mergeOn
) %>%
addRectangles(lng1 = -121.4, lat1 = 38.7, lng2 = -122, lat2 = 39.1, color = "#ff0000", opacity = 0.9, fillColor = "transparent")
library(dplyr)
library(leaflet)
# Create a master list of all wells
master_wells <- distinct(master, mergeOn, .keep_all = TRUE)[,1:7]
# we must keep some columns as chr b/c some have letters
master_wells$NDI <- as.character(master_wells$NDI)
# Load in a geojson file that outlines the central valley
CV_shape <- geojsonio::geojson_read("code/CA_Bulletin_118_Aquifer_Regions_dissolved.geojson", what = "sp")
library(dplyr)
library(leaflet)
# Create a master list of all wells
master_wells <- distinct(master, mergeOn, .keep_all = TRUE)[,1:7]
# we must keep some columns as chr b/c some have letters
master_wells$NDI <- as.character(master_wells$NDI)
# Load in a geojson file that outlines the central valley
CV_shape <- geojsonio::geojson_read("code/CA_Bulletin_118_Aquifer_Regions_dissolved.geojson", what = "sp")
load("code/master.Rda")
master_wells <- read.csv(file = 'code/master_wells.csv')
test_wells <- c('25N03W11B003M',
'29N03W18M001M',
'24N02W29N004M',
'24N02W24D003M',
'24N02W03B001M')
test_wells <- subset(master_wells, mergeOn %in% test_wells)
test_ts_yr <- data.frame(c())
for (well in test_wells$mergeOn){
ts <- filter(master, mergeOn == well)
yr_ts <- ts %>%
mutate(date = lubridate::floor_date(date, "1 year"), mergeOn = mergeOn) %>%
group_by(date, mergeOn) %>%
summarize(Mean_depth=-1*mean(depth.to.GW..ft.))
test_ts_yr <- as.data.frame(rbind(test_ts_yr, yr_ts))
#assign(paste(well, "_3mon_ts", sep = ""), mon_ts)
}
# Now let's create time series graphs of these yearly means
test_ts_yr %>%
ggplot(aes(x = date, y = Mean_depth)) +
geom_line() +
xlab("Date") +
ylab("Depth (ft)") +
ggtitle(well) +
theme(plot.title = element_text(hjust = 0.5)) +
facet_wrap(~mergeOn)
load("code/master.Rda")
master_wells <- read.csv(file = 'code/master_wells.csv')
test_wells <- c('25N03W11B003M',
'29N03W18M001M',
'24N02W29N004M',
'24N02W24D003M',
'24N02W03B001M')
test_wells <- subset(master_wells, mergeOn %in% test_wells)
test_ts_yr <- data.frame(c())
for (well in test_wells$mergeOn){
ts <- filter(master, mergeOn == well)
yr_ts <- ts %>%
mutate(date = lubridate::floor_date(date, "1 year"), mergeOn = mergeOn) %>%
group_by(date, mergeOn) %>%
summarize(Mean_depth=-1*mean(depth.to.GW..ft.))
test_ts_yr <- as.data.frame(rbind(test_ts_yr, yr_ts))
#assign(paste(well, "_3mon_ts", sep = ""), mon_ts)
}
